<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æœå‹™äººå“¡è©•åƒ¹è¡¨å–®</title>
<style>
body {
  font-family: "Noto Sans TC", sans-serif;
  background: #f4f6f8;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}
.container {
  background: white;
  padding: 30px 40px;
  border-radius: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  width: 90%;
  max-width: 600px;
}
h2 { text-align:center; color:#333; }
label { display:block; margin-top:15px; color:#444; font-weight:bold; }
input, select, textarea { width:100%; margin-top:5px; padding:10px; border:1px solid #ccc; border-radius:8px; font-size:16px; }
textarea { resize:none; height:100px; }
.stars { display:flex; gap:8px; font-size:28px; cursor:pointer; color:#ccc; margin-top:5px; }
.stars .active { color:#f5c518; }
button { margin-top:20px; width:100%; padding:12px; background-color:#007bff; border:none; border-radius:8px; color:white; font-size:16px; cursor:pointer; }
button:hover { background-color:#0056b3; }
.delete-btn { background-color:#dc3545; width:auto; padding:6px 12px; border-radius:6px; font-size:14px; margin-top:8px; }
.delete-btn:hover { background-color:#b02a37; }
.thankyou { display:none; text-align:center; font-size:18px; color:#28a745; margin-top:15px; }
.review-list { margin-top:30px; border-top:1px solid #ddd; padding-top:20px; }
.review-item { background:#f9f9f9; border-radius:10px; padding:15px; margin-bottom:10px; box-shadow:0 2px 6px rgba(0,0,0,0.05); }
.review-item strong { color:#333; }
.stars-display { color:#f5c518; margin:3px 0; }
</style>
</head>
<body>

<div class="container">
<h2>è©•åƒ¹æˆ‘å€‘çš„æœå‹™äººå“¡</h2>
<form id="reviewForm">
  <label>å§“åï¼š</label>
  <input type="text" id="name" required>

  <label>æœå‹™äººå“¡ï¼š</label>
  <select id="staff" required>
    <option value="">è«‹é¸æ“‡æœå‹™äººå“¡</option>
    <option value="ææ±ç¾¿ï¼ˆç·¨è™Ÿ1ï¼‰">ææ±ç¾¿ï¼ˆç·¨è™Ÿ1ï¼‰</option>
    <option value="é™³å®‡ç¿ï¼ˆç·¨è™Ÿ2ï¼‰">é™³å®‡ç¿ï¼ˆç·¨è™Ÿ2ï¼‰</option>
    <option value="æº«ä¸–éµ¬ï¼ˆç·¨è™Ÿ3ï¼‰">æº«ä¸–éµ¬ï¼ˆç·¨è™Ÿ3ï¼‰</option>
  </select>

  <label>æ˜Ÿè©•ï¼š</label>
  <div class="stars" id="stars">
    <span data-value="1">â˜…</span>
    <span data-value="2">â˜…</span>
    <span data-value="3">â˜…</span>
    <span data-value="4">â˜…</span>
    <span data-value="5">â˜…</span>
  </div>

  <label>åŸå› ï¼š</label>
  <textarea id="reason" placeholder="è«‹è¼¸å…¥æ‚¨çš„æ„è¦‹..." required></textarea>

  <button type="submit">é€å‡ºè©•åƒ¹</button>
</form>
<div class="thankyou">æ„Ÿè¬æ‚¨çš„è©•åƒ¹ï¼ğŸ™</div>

<div class="review-list" id="reviewList"></div>
</div>

<script>
const stars = document.querySelectorAll('#stars span');
let rating = 0;
stars.forEach(star => {
  star.addEventListener('click', () => {
    rating = star.dataset.value;
    stars.forEach(s => s.classList.remove('active'));
    for(let i=0;i<rating;i++){ stars[i].classList.add('active'); }
  });
});

const form = document.getElementById('reviewForm');
const thankyou = document.querySelector('.thankyou');
const reviewList = document.getElementById('reviewList');

window.onload = loadReviews;

form.addEventListener('submit', e=>{
  e.preventDefault();
  if(rating===0){ alert('è«‹å…ˆé¸æ“‡æ˜Ÿè©•ï¼'); return; }

  const name = document.getElementById('name').value.trim();
  const staff = document.getElementById('staff').value.trim();
  const reason = document.getElementById('reason').value.trim();

  const review = { id: Date.now(), name, staff, rating, reason, time: new Date().toLocaleString() };

  let reviews = JSON.parse(localStorage.getItem('reviews')) || [];
  reviews.push(review);
  localStorage.setItem('reviews', JSON.stringify(reviews));

  form.reset(); stars.forEach(s=>s.classList.remove('active')); rating=0;
  thankyou.style.display='block'; setTimeout(()=>thankyou.style.display='none',2000);

  loadReviews();
});

// è«‹æ±‚åˆªé™¤è©•è«–
function requestDelete(id){
  const reason = prompt("è«‹è¼¸å…¥åˆªé™¤ç†ç”±ï¼š");
  if(!reason) return;
  const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
  const review = reviews.find(r=>r.id===id);
  if(!review) return;
  let deleteRequests = JSON.parse(localStorage.getItem('deleteRequests')) || [];
  deleteRequests.push({
    id: Date.now(),
    reviewId: review.id,
    name: review.name,
    staff: review.staff,
    reason: reason,
    time: new Date().toLocaleString()
  });
  localStorage.setItem('deleteRequests', JSON.stringify(deleteRequests));
  alert('åˆªé™¤è«‹æ±‚å·²æäº¤ï¼Œè«‹ç­‰å¾…å¾Œå°å¯©æ ¸');
}

function loadReviews(){
  let reviews = JSON.parse(localStorage.getItem('reviews')) || [];
  reviewList.innerHTML='';
  if(reviews.length===0){ reviewList.innerHTML='<p style="text-align:center;color:#777;">ç›®å‰å°šç„¡ä»»ä½•è©•åƒ¹ã€‚</p>'; return; }
  reviews.slice().reverse().forEach(r=>{
    const div = document.createElement('div');
    div.className='review-item';
    div.innerHTML=`
      <strong>${r.name}</strong> å° <strong>${r.staff}</strong> çš„è©•åƒ¹<br>
      <div class="stars-display">${'â˜…'.repeat(r.rating)}${'â˜†'.repeat(5-r.rating)}</div>
      <p>${r.reason}</p>
      <small style="color:#777;">æ™‚é–“ï¼š${r.time}</small><br>
      <button class="delete-btn" onclick="requestDelete(${r.id})">è¦æ±‚åˆªé™¤è©•è«–</button>
    `;
    reviewList.appendChild(div);
  });
}
</script>

</body>
</html>